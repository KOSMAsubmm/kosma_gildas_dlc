if .not.exist(error_flag) then;
   def int error_flag /global
endif



begin procedure write_multiple
    sic message class s-f
    sic message class -FEWRIU
    sic message sic -FEWRIU
    SIC MESSAGE GLOBAL ON
    for ver 1 to 'r%HEAD%GEN%ver'
        on error let error_flag 1
        get number ver
        if error_flag.eq.0 then
            say "writing "'ver'
            write number
        else
            let error_flag 0
        endif
    next
    !SIC MESSAGE SIC S+R    
end procedure write_multiple   


begin procedure copy_multiple
    sic message class s-f
    sic message class -FEWRIU
    sic message sic -FEWRIU
    SIC MESSAGE GLOBAL ON
    on error let error_flag 1
    for i 1 to found
        get idx%num[i]
        @write_multiple
    next
    !SIC MESSAGE SIC S+R
end procedure copy_multiple
